{"ast":null,"code":"const {\n  Router\n} = require('express');\nconst router = Router();\nconst jwt = require('jsonwebtoken');\nrequire('dotenv').config();\nconst User = require('../../user');\nconst {\n  createToken\n} = require('../utils/utils');\n\n//need to update if models/user.js is updated with employer login/signup\n//copied from lesson*\n\nrouter.get('/signup', (req, res) => res.render('signup'));\nrouter.post('/signup', async (req, res) => {\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n    const user = await User.create({\n      email,\n      password\n    });\n    const token = createToken(user._id);\n    res.cookie('jwt', token, {\n      httpOnly: true,\n      maxAge: 3 * 24 * 60 * 60 * 1000\n    });\n    res.status(201).json({\n      user: user._id\n    });\n  } catch (ex) {}\n});\nrouter.get(\"/login\", (req, res) => {\n  res.render(\"login\");\n});\nrouter.post('/login', async (req, res) => {\n  try {\n    const {\n      email,\n      password\n    } = req.body;\n    const user = await User.login(email, password);\n    const token = createToken(user._id);\n    res.cookie('jwt', token, {\n      httpOnly: true,\n      maxAge: 3 * 24 * 60 * 60 * 1000\n    });\n    res.status(201).json({\n      user: user._id\n    });\n  } catch (ex) {}\n});\nmodule.exports = router;","map":{"version":3,"names":["Router","require","router","jwt","config","User","createToken","get","req","res","render","post","email","password","body","user","create","token","_id","cookie","httpOnly","maxAge","status","json","ex","login","module","exports"],"sources":["C:/Users/drake/OneDrive/Documents/WebDevAssignment/src/routes/authRoutes.js"],"sourcesContent":["const { Router } = require('express')\nconst router = Router()\nconst jwt = require('jsonwebtoken')\nrequire('dotenv').config()\nconst User = require('../../user');\nconst { createToken } = require('../utils/utils');\n\n//need to update if models/user.js is updated with employer login/signup\n//copied from lesson*\n\nrouter.get('/signup', (req,res)=>res.render('signup'))\n\nrouter.post('/signup', async (req,res) => {\n    try{\n        const {email, password} = req.body\n        const user = await User.create({email, password})\n        const token = createToken(user._id)\n        res.cookie('jwt', token, {httpOnly: true, maxAge: 3*24*60*60*1000})\n        res.status(201).json({user: user._id})\n\n    }\n    catch(ex)\n    {\n\n    }\n})\n\nrouter.get(\"/login\", (req,res)=>{res.render(\"login\")})\n\nrouter.post('/login', async (req,res) => {\n    try{\n        const {email, password} = req.body\n        const user = await User.login(email, password);\n        const token = createToken(user._id)\n        res.cookie('jwt', token, {httpOnly: true, maxAge: 3*24*60*60*1000})\n        res.status(201).json({user: user._id})\n        \n\n    }\n    catch(ex)\n    {\n\n    }\n})\n\nmodule.exports = router"],"mappings":"AAAA,MAAM;EAAEA;AAAO,CAAC,GAAGC,OAAO,CAAC,SAAS,CAAC;AACrC,MAAMC,MAAM,GAAGF,MAAM,CAAC,CAAC;AACvB,MAAMG,GAAG,GAAGF,OAAO,CAAC,cAAc,CAAC;AACnCA,OAAO,CAAC,QAAQ,CAAC,CAACG,MAAM,CAAC,CAAC;AAC1B,MAAMC,IAAI,GAAGJ,OAAO,CAAC,YAAY,CAAC;AAClC,MAAM;EAAEK;AAAY,CAAC,GAAGL,OAAO,CAAC,gBAAgB,CAAC;;AAEjD;AACA;;AAEAC,MAAM,CAACK,GAAG,CAAC,SAAS,EAAE,CAACC,GAAG,EAACC,GAAG,KAAGA,GAAG,CAACC,MAAM,CAAC,QAAQ,CAAC,CAAC;AAEtDR,MAAM,CAACS,IAAI,CAAC,SAAS,EAAE,OAAOH,GAAG,EAACC,GAAG,KAAK;EACtC,IAAG;IACC,MAAM;MAACG,KAAK;MAAEC;IAAQ,CAAC,GAAGL,GAAG,CAACM,IAAI;IAClC,MAAMC,IAAI,GAAG,MAAMV,IAAI,CAACW,MAAM,CAAC;MAACJ,KAAK;MAAEC;IAAQ,CAAC,CAAC;IACjD,MAAMI,KAAK,GAAGX,WAAW,CAACS,IAAI,CAACG,GAAG,CAAC;IACnCT,GAAG,CAACU,MAAM,CAAC,KAAK,EAAEF,KAAK,EAAE;MAACG,QAAQ,EAAE,IAAI;MAAEC,MAAM,EAAE,CAAC,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC;IAAI,CAAC,CAAC;IACnEZ,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAACR,IAAI,EAAEA,IAAI,CAACG;IAAG,CAAC,CAAC;EAE1C,CAAC,CACD,OAAMM,EAAE,EACR,CAEA;AACJ,CAAC,CAAC;AAEFtB,MAAM,CAACK,GAAG,CAAC,QAAQ,EAAE,CAACC,GAAG,EAACC,GAAG,KAAG;EAACA,GAAG,CAACC,MAAM,CAAC,OAAO,CAAC;AAAA,CAAC,CAAC;AAEtDR,MAAM,CAACS,IAAI,CAAC,QAAQ,EAAE,OAAOH,GAAG,EAACC,GAAG,KAAK;EACrC,IAAG;IACC,MAAM;MAACG,KAAK;MAAEC;IAAQ,CAAC,GAAGL,GAAG,CAACM,IAAI;IAClC,MAAMC,IAAI,GAAG,MAAMV,IAAI,CAACoB,KAAK,CAACb,KAAK,EAAEC,QAAQ,CAAC;IAC9C,MAAMI,KAAK,GAAGX,WAAW,CAACS,IAAI,CAACG,GAAG,CAAC;IACnCT,GAAG,CAACU,MAAM,CAAC,KAAK,EAAEF,KAAK,EAAE;MAACG,QAAQ,EAAE,IAAI;MAAEC,MAAM,EAAE,CAAC,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC;IAAI,CAAC,CAAC;IACnEZ,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAACR,IAAI,EAAEA,IAAI,CAACG;IAAG,CAAC,CAAC;EAG1C,CAAC,CACD,OAAMM,EAAE,EACR,CAEA;AACJ,CAAC,CAAC;AAEFE,MAAM,CAACC,OAAO,GAAGzB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}